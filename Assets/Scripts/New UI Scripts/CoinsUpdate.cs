using UnityEngine;
using UnityEngine.UI;
using System.Collections;

public class CoinsUpdate : MonoBehaviour
{
	Text text;

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void Awake()
	{
		text = GetComponent<Text>();
		text.text = PlayerPrefs.GetInt("Coins").ToString();
	}
	
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
	void OnEnable()
	{
		CoinsManager.OnCoinsChanged += SetCoins;
	}
	
	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
	void OnDisable()
	{
		CoinsManager.OnCoinsChanged -= SetCoins;
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void SetCoins()
	{
		PlayerPrefs.SetInt("Coins", CoinsManager.instance.coins);
		text.text = CoinsManager.instance.coins.ToString();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/*
	void Update()
	{
		text.text = PlayerPrefs.GetInt("Coins").ToString();
	}*/
}
